<!DOCTYPE html>
<html>
<head>
    <title>Stocks</title>
    <link rel="icon" href="/Website/icon.png">
    <link rel="stylesheet" href="/Website/main.css">
    <!-- Removed inline style block, handled by main.css -->
</head>
<body> <!-- Removed class="body" -->
    <header class="header">
        <li><a href="index.html"><img src="/Website/icon.png" class="icon"></a></li>
        <li><a href="index.html">Home</a></li>
        <li><a href="stocks.html">Stock</a></li>
        <li><a href="blog.html">Blog</a></li>
    </header>

    <div class="banner-base banner1"> <!-- Use common and specific banner classes -->
        <h2>Stocks</h2>
    </div>

    <div class="content-wrapper">
        <div class="ticker-row">
            <!-- TradingView Ticker Tape Widget BEGIN -->
            <div class="widget-container card ticker-card">
                <div class="tradingview-widget-container">
                  <div class="tradingview-widget-container__widget"></div>
                </div>
            </div>
            <!-- TradingView Ticker Tape Widget END -->
        </div>
        <div class="main-content-row stocks-main-row">
            <div class="stocks-32" style="width: auto;">
                <h3 class="panel-title">行情图</h3>
                <!-- TradingView Advanced Chart Widget BEGIN -->
                <div class="tradingview-widget-container" style="height: 600px; width: 100%;">
                <div class="tradingview-widget-container__widget"></div>

                </div>
                <!-- TradingView Advanced Chart Widget END -->
            </div>

        </div>
    </div>

    <!-- Optional Footer -->
    <!-- <footer class="footer">
        <p>&copy; 2023 Your Website</p>
    </footer> -->
    <script src="theme.js" defer></script>
    <script>
      function getCurrentTheme() {
        return document.documentElement.classList.contains('dark') ? 'dark' : 'light';
      }
      function renderTradingViewWidgets() {
        // 清除原有小部件
        document.querySelectorAll('.tradingview-widget-container__widget').forEach(e => e.innerHTML = '');
        // 重新插入 TradingView 小部件脚本
        // Ticker Tape
        let tickerScript = document.createElement('script');
        tickerScript.type = 'text/javascript';
        tickerScript.src = 'https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js';
        tickerScript.async = true;
        tickerScript.innerHTML = JSON.stringify({
          symbols: [
            {proName: 'FOREXCOM:SPXUSD', title: 'S&P 500 Index'},
            {proName: 'FOREXCOM:NSXUSD', title: 'US 100 Cash CFD'},
            {proName: 'FX_IDC:EURUSD', title: 'EUR to USD'},
            {proName: 'BITSTAMP:BTCUSD', title: 'Bitcoin'},
            {proName: 'BITSTAMP:ETHUSD', title: 'Ethereum'}
          ],
          showSymbolLogo: true,
          isTransparent: false,
          displayMode: 'adaptive',
          colorTheme: getCurrentTheme(),
          locale: 'en'
        });
        document.querySelector('.widget-container .tradingview-widget-container').appendChild(tickerScript);
        // Advanced Chart
        let advScript = document.createElement('script');
        advScript.type = 'text/javascript';
        advScript.src = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js';
        advScript.async = true;
        advScript.innerHTML = JSON.stringify({
          width: '100%',
          height: '100%',
          symbol: 'NASDAQ:AAPL',
          interval: 'D',
          timezone: 'Etc/UTC',
          theme: getCurrentTheme(),
          style: '1',
          locale: 'en',
          withdateranges: true,
          hide_side_toolbar: false,
          allow_symbol_change: true,
          support_host: 'https://www.tradingview.com'
        });
        document.querySelectorAll('.tradingview-widget-container')[1].appendChild(advScript);
        // Market Quotes
        let quotesScript = document.createElement('script');
        quotesScript.type = 'text/javascript';
        quotesScript.src = 'https://s3.tradingview.com/external-embedding/embed-widget-market-quotes.js';
        quotesScript.async = true;
        quotesScript.innerHTML = JSON.stringify({
          width: '100%',
          height: '100%',
          symbolsGroups: [
            {name: 'Indices', originalName: 'Indices', symbols: [
              {name: 'FOREXCOM:SPXUSD', displayName: 'S&P 500 Index'},
              {name: 'FOREXCOM:NSXUSD', displayName: 'US 100 Cash CFD'},
              {name: 'FOREXCOM:DJI', displayName: 'Dow Jones Industrial Average Index'},
              {name: 'INDEX:NKY', displayName: 'Japan 225'},
              {name: 'INDEX:DEU40', displayName: 'DAX Index'},
              {name: 'FOREXCOM:UKXGBP', displayName: 'FTSE 100 Index'}
            ]},
            {name: 'Forex', originalName: 'Forex', symbols: [
              {name: 'FX:EURUSD', displayName: 'EUR to USD'},
              {name: 'FX:GBPUSD', displayName: 'GBP to USD'},
              {name: 'FX:USDJPY', displayName: 'USD to JPY'},
              {name: 'FX:USDCHF', displayName: 'USD to CHF'},
              {name: 'FX:AUDUSD', displayName: 'AUD to USD'},
              {name: 'FX:USDCAD', displayName: 'USD to CAD'}
            ]},
            {name: 'Futures', originalName: 'Futures', symbols: [
              {name: 'BMFBOVESPA:ISP1!', displayName: 'S&P 500 Index Futures'},
              {name: 'BMFBOVESPA:EUR1!', displayName: 'Euro Futures'},
              {name: 'PYTH:WTI3!', displayName: 'WTI CRUDE OIL'},
              {name: 'BMFBOVESPA:ETH1!', displayName: 'Hydrous ethanol'},
              {name: 'BMFBOVESPA:CCM1!', displayName: 'Corn'}
            ]},
            {name: 'Bonds', originalName: 'Bonds', symbols: [
              {name: 'EUREX:FGBL1!', displayName: 'Euro Bund'},
              {name: 'EUREX:FBTP1!', displayName: 'Euro BTP'},
              {name: 'EUREX:FGBM1!', displayName: 'Euro BOBL'}
            ]}
          ],
          showSymbolLogo: true,
          isTransparent: false,
          colorTheme: getCurrentTheme(),
          locale: 'en',
          backgroundColor: getCurrentTheme() === 'dark' ? '#1e222d' : '#ffffff'
        });
        document.querySelectorAll('.tradingview-widget-container')[2].appendChild(quotesScript);
      }
      // 初始渲染
      window.addEventListener('DOMContentLoaded', renderTradingViewWidgets);
      // 监听主题切换按钮
      document.getElementById('theme-toggle-button').addEventListener('click', function() {
        setTimeout(renderTradingViewWidgets, 300); // 等待主题切换动画完成
      });
    </script>
    <div class="transition-screen" id="transitionScreen">
      <div class="transition-spinner"></div>
    </div>
</body>
</html>

<script>
  // 跳转动画逻辑
  document.querySelectorAll('a[href$=".html"]').forEach(function(link) {
    link.addEventListener('click', function(e) {
      const href = link.getAttribute('href');
      if(href && !href.startsWith('#') && !link.hasAttribute('download')) {
        e.preventDefault();
        const screen = document.getElementById('transitionScreen');
        screen.classList.add('active');
        setTimeout(function(){
          window.location.href = href;
        }, 500);
      }
    });
  });
  // 页面加载后隐藏动画
  window.addEventListener('pageshow', function(){
    const screen = document.getElementById('transitionScreen');
    if(screen) screen.classList.remove('active');
  });
</script>